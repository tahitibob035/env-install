---
- hosts: all 
  remote_user: root
  become: yes
  tasks:
    - name: Test connection
      ping:
      remote_user: yourname

    - name: Install basics packages (vim, git)
      package:
        name: vim,git
        update_cache: yes 

    - name: Install apt transport https
      package:
        name: apt-transport-https

    - name: Add sublime apt key
      apt_key:
        url: https://download.sublimetext.com/sublimehq-pub.gpg  
    - name: Add sublimetext deb
      shell: echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
    - name: Install sublime-text
      package:
        name: sublime-text
        update_cache: yes